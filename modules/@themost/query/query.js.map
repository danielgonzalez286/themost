{"version":3,"sources":["query.es6"],"names":["sprintf","_","_empty","obj","forEach","keys","x","hasOwnProperty","QueryParameter","QueryFieldAggregator","comparison","name","isArray","i","length","Error","privatesProperty","Symbol","QueryExpression","$select","undefined","$delete","$update","$insert","$order","$group","$expand","$where","$prepared","$fixed","s","prop","assign","alias","$alias","entity","findKey","joins","push","fields","re","QueryField","fieldNameExpression","arr","lastIndex","test","f","from","$entity","table","tableFields","y","isObject","useOr","preparedWhere","$or","$and","self","result","$take","value","$distinct","isNil","prototype","nameOf","call","where","valueOf","table1","props","args","Array","slice","arguments","TypeError","QueryEntity","$as","$ref","expand","expr","$with","$asc","$desc","op","newFilter","aggr","p0","wrapWith","QueryFieldComparer","compareWith","__append","$ne","values","$in","$nin","$mod","$bit","$gt","r","isString","$regex","$options","$text","$search","$not","$lt","$lte","$gte","value1","value2","comparison1","comparison2","comp1","comp2","n","$skip","isNaN","$add","$subtract","$multiply","$divide","$round","start","$substr","$indexOf","$concat","$trim","$length","$date","$year","$month","$dayOfMonth","$hour","$minutes","$seconds","$floor","$ceiling","$toLower","$toUpper","q","select","number","res","toString","val","Date","dt","year","getFullYear","month","zeroPad","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","millisecond","getMilliseconds","Object","escape","join","replace","ComparisonOperators","$eq","LogicalOperators","$nor","EvaluationOperators","$sub","$mul","$div","eq","equal","ne","notEqual","gt","greaterThan","lt","lowerThan","lte","lowerOrEqual","gte","greaterOrEqual","defineProperty","get","configurable","enumerable","$join","QueryValue","$value","$name","concat","split","aggregate","$count","strings","$sum","$min","$avg","$max","RegExp","source","String","as","count","min","max","average","sum","OpenDataQuery","exprs","left","right","$filter","lop","_lop","attr","$top","$orderby","append","indexOf","pos","s0","s1","s2","s3","s4"],"mappings":"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","file":"query.js","sourcesContent":["/**\n * @license\n * MOST Web Framework 2.0 Codename Blueshift\n * Copyright (c) 2014, Kyriakos Barbounakis k.barbounakis@gmail.com\n *                     Anthi Oikonomou anthioikonomou@gmail.com\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\n'use strict';\nimport sprintf from 'sprintf';\nimport {_} from 'lodash';\n\nfunction _empty(obj) {\n    if (typeof obj === 'undefined' || obj == null) { return; }\n    _.forEach(_.keys(obj), function(x) { if (obj.hasOwnProperty(x)) { delete obj[x]; }  });\n}\n\n/**\n * @class\n */\nclass QueryParameter {\n    constructor() {\n        //do nothing\n    }\n}\n\n/**\n * @class\n */\nclass QueryFieldAggregator {\n    /**\n     * Wraps the given comparison expression in this aggregate function e.g. wraps { $gt:45 } with $floor aggregate function and returns { $floor: { $gt:45 } }\n     * @param {*} comparison\n     */\n    wrapWith(comparison) {\n        const name = _.keys(this)[0];\n        if (name) {\n            if (_.isArray(this[name])) {\n                //search for query parameter\n                for (let i = 0; i < this[name].length; i++) {\n                    if (this[name][i] instanceof QueryParameter) {\n                        this[name][i] = comparison;\n                        return this;\n                    }\n                }\n                throw new Error('Invalid aggregate expression. Parameter is missing.');\n            }\n            else {\n                if (this[name] instanceof QueryParameter) {\n                    this[name] = comparison;\n                    return this;\n                }\n                throw new Error('Invalid aggregate expression. Parameter is missing.');\n            }\n        }\n        throw new Error('Invalid aggregate expression. Aggregator is missing.');\n    }\n}\n\nconst privatesProperty = Symbol('privates');\n\n/**\n * @class\n */\nexport class QueryExpression {\n    /**\n     * @constructor\n     */\n    constructor() {\n        /**\n         * Gets or sets an object or an array of objects that represents the entity where a select query will be applied.\n         * e.g. $select : { products: ['id', 'title', 'price'] },\n         * $select : [{ products: ['id', 'title', 'price'] }, { manufacturer:[ 'id', 'title', 'location'] }]\n         * @type {*}\n         * @private\n         */\n        this.$select = undefined;\n        /**\n         * Gets or sets an object or an array of objects that represents the entity where a delete query will be applied.\n         * e.g. { $delete : 'products', $where : { id :100 } }\n         * @type {*}\n         * @private\n         */\n        this.$delete = undefined;\n        /**\n         Gets or sets an object or an array of objects that represents the entity where an update query will be applied.\n         * e.g. $update : { products: {title: 'string #1', price: 100}, $where: { id:100 } }\n         * @type {*}\n         * @private\n         */\n        this.$update = undefined;\n        /**\n         * Gets or sets an object or an array of objects that represents the entity where an insert query will be applied.\n         * e.g. $insert : { products: { title: 'string #1', price: 100} }\n         * @type {*}\n         * @private\n         */\n        this.$insert = undefined;\n        /**\n         * Gets or sets the order statement of this query\n         * e.g. $order: [{ $asc: 'price' }, { $desc: 'dateCreated' }] or $order: [{ $asc: ['price', 'dateCreated'] }]\n         * @type {*}\n         * @private\n         */\n        this.$order = undefined;\n        /**\n         * Gets or sets the group by statement of this query\n         * e.g. $group: ['price', 'dateCreated']\n         * @type {*}\n         * @private\n         */\n        this.$group = undefined;\n        /**\n         * @type {*}\n         * @private\n         */\n        this.$expand = undefined;\n        /**\n         * Represents the filter statement of this query expression\n         * e.g. $where : { { price: 100} }\n         * @type {*}\n         * @private\n         */\n        this.$where = undefined;\n        /**\n         * Represents a prepared filter that\n         * e.g. $where : { { price: 100} }\n         * @type {*}\n         * @private\n         */\n        this.$prepared = undefined;\n        /**\n         * Represents a select query with only fixed values e.g. SELECT * FROM (SELECT 1 AS id,'test' AS title) t0\n         * @type {*}\n         * @private\n         */\n        this.$fixed = undefined;\n        /**\n         * @private\n         */\n        this[privatesProperty] = { };\n\n    }\n\n    /**\n     * Creates a new query expression\n     * @param {string|*} entity\n     * @param {Array=} fields\n     */\n    static create(entity, fields) {\n        const q = new QueryExpression();\n        q.from(entity);\n        if (_.isArray(fields)) {\n            q.select(fields);\n        }\n        return q;\n    }\n\n    /**\n     * @private\n     * @param {string|*=} s\n     * @returns {string|*}\n     */\n    prop(s) {\n        if (typeof s === 'undefined') { return this[privatesProperty].prop; }\n        if (s == null) { delete this[privatesProperty].prop; }\n        this[privatesProperty].prop = s;\n    }\n\n    /**\n     * Clones the current expression and returns a new QueryExpression object.\n     * @example\n     * var q = new QueryExpression();\n     * //do some stuff\n     * //...\n     * //clone expression\n     * var q1 = q.clone();\n     * @returns {QueryExpression}\n     */\n    clone() {\n        return _.assign(new QueryExpression(), this);\n    }\n\n    /**\n     * Sets the alias of a QueryExpression instance. This alias is going to be used in sub-query operations.\n     * @returns {QueryExpression}\n     */\n    as(alias) {\n        this.$alias = alias;\n        return this;\n    }\n\n    /**\n     * Gets a collection that represents the selected fields of the underlying expression\n     * @returns {Array}\n     */\n    fields() {\n\n        if (typeof this.$select === 'undefined' || this.$select == null)\n            return [];\n        const entity = _.findKey(this.$select);\n        let joins = [];\n        if (this.$expand!=null)\n        {\n            if (_.isArray(this.$expand))\n                joins=this.$expand;\n            else\n                joins.push(this.$expand);\n        }\n        //get entity fields\n        const fields = [];\n        //get fields\n        const re = QueryField.fieldNameExpression, arr = this.$select[entity] || [];\n        _.forEach(arr, function(x)\n        {\n            if (typeof x === 'string') {\n                re.lastIndex=0;\n                if (!re.test(x))\n                    fields.push(new QueryField(x));\n                else {\n                    const f = new QueryField(x);\n                    fields.push(f.from(entity));\n                }\n            }\n            else {\n                fields.push(_.assign(new QueryField(), x));\n            }\n        });\n        //enumerate join fields\n        _.forEach(joins, function(x)\n        {\n            if (x.$entity instanceof QueryExpression) {\n                //todo::add fields if any\n            }\n            else {\n                const table = _.findKey(x.$entity), tableFields = x.$entity[table] || [];\n                _.forEach(tableFields, function(y) {\n                    if (typeof x === 'string') {\n                        fields.push(new QueryField(y));\n                    }\n                    else {\n                        fields.push(_.assign(new QueryField(), y));\n                    }\n                });\n            }\n        });\n        return fields;\n    }\n\n    /**\n     * Gets a boolean value that indicates whether query expression has a filter statement or not.\n     * @returns {boolean}\n     */\n    hasFilter() {\n        return _.isObject(this.$where);\n    }\n\n    /**\n     * @param {Boolean} useOr\n     * @returns {QueryExpression}\n     */\n    prepare(useOr) {\n        if (typeof this.$where === 'object') {\n            if (typeof this.$prepared === 'object')\n            {\n                let preparedWhere = {};\n                if (useOr)\n                    preparedWhere = { $or: [this.$prepared, this.$where] };\n                else\n                    preparedWhere = { $and: [this.$prepared, this.$where] };\n                this.$prepared = preparedWhere;\n            }\n            else {\n                this.$prepared = this.$where;\n            }\n            delete this.$where;\n        }\n        return this;\n    }\n\n    /**\n     * Gets a boolean value that indicates whether query expression has fields or not.\n     * @returns {boolean}\n     */\n    hasFields() {\n        const self = this;\n        if (!_.isObject(self.$select))\n            return false;\n        const entity = _.findKey(self.$select);\n        let joins = [];\n        if (self.$expand!=null)\n        {\n            if (_.isArray(self.$expand))\n                joins=self.$expand;\n            else\n                joins.push(self.$expand);\n        }\n        //search for fields\n        if (_.isArray(self.$select[entity])) {\n            if (self.$select[entity].length>0)\n                return true;\n        }\n        let result = false;\n        //enumerate join fields\n        _.forEach(joins, function(x)\n        {\n            const table = _.findKey(x.$entity);\n            if (_.isArray(x.$entity[table])) {\n                if (x.$entity[table].length>0)\n                    result = true;\n            }\n        });\n        return result;\n    }\n\n    /**\n     * Gets a boolean value that indicates whether query expression has paging or not.\n     * @returns {boolean}\n     */\n    hasPaging() {\n        return (typeof this.$take !=='undefined' && this.$take!=null);\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    distinct(value) {\n        if (typeof value === 'undefined')\n            this.$distinct = true;\n        else\n            this.$distinct = value || false;\n        return this;\n    }\n\n    /**\n     * @param name {string|QueryField|*}\n     * @returns {QueryExpression}\n     */\n    where(name) {\n        if (_.isNil(name))\n            throw new Error('Left operand cannot be empty. Expected string or object.');\n        delete this.$where;\n        if (typeof name === 'string') {\n            this.prop(name);\n        }\n        else if (typeof name === 'object') {\n            this.prop(QueryField.prototype.nameOf.call(name))\n        }\n        else {\n            throw new Error('Invalid left operand. Expected string or object.');\n        }\n        return this;\n    }\n\n    /**\n     * Injects the given filter expression into the current query expression\n     * @param {*} where - An object that represents a filter expression\n     * @returns {QueryExpression}\n     */\n    injectWhere(where) {\n        if (_.isNil(where))\n            return this;\n        this.$where = where;\n        return this;\n    }\n\n    /**\n     * Initializes a delete query and sets the entity name that is going to be used in this query.\n     * @param entity {string}\n     * @returns {QueryExpression}\n     */\n    delete(entity) {\n        if (entity==null)\n            return this;\n        this.$delete = entity.valueOf();\n        //delete other properties (if any)\n        delete this.$insert;\n        delete this.$select;\n        delete this.$update;\n        return this;\n    }\n\n    /**\n     * Initializes an insert query and sets the object that is going to be inserted.\n     * @param obj {*}\n     * @returns {QueryExpression}\n     */\n    insert(obj) {\n        if (obj==null)\n            return this;\n        if (_.isArray(obj) || _.isObject(obj)) {\n            this.$insert = { table1: obj };\n            //delete other properties (if any)\n            delete this.$delete;\n            delete this.$select;\n            delete this.$update;\n            return this;\n        }\n        else {\n            throw new Error('Invalid argument. Object must be an object or an array of objects');\n        }\n    }\n\n    into(entity) {\n        if (entity==null)\n            return this;\n        if (this.$insert==null)\n            return this;\n        const prop = _.findKey(this.$insert);\n        if (prop==null)\n            return this;\n        if (prop==entity)\n            return this;\n        const value = this.$insert[prop];\n        if (value==null)\n            return this;\n        this.$insert[entity] = value;\n        delete this.$insert[prop];\n        return this;\n    }\n\n    /**\n     * Initializes an update query and sets the entity name that is going to be used in this query.\n     * @param {string} entity\n     * @returns {QueryExpression}\n     */\n    update(entity) {\n        if (entity==null)\n            return this;\n        if (typeof entity !== 'string')\n            throw new Error('Invalid argument type. Update entity argument must be a string.');\n        this.$update = {};\n        this.$update[entity] = {};\n        //delete other properties (if any)\n        delete this.$delete;\n        delete this.$select;\n        delete this.$insert;\n        return this;\n    }\n\n    /**\n     * Sets the object that is going to be updated through an update expression.\n     * @param {*} obj\n     * @returns {QueryExpression}\n     */\n    set(obj) {\n        if (obj==null)\n            return this;\n        if (_.isArray(obj) || !_.isObject(obj))\n            throw new Error('Invalid argument type. Update expression argument must be an object.');\n        //get entity name (by property)\n        const prop = _.findKey(this.$update);\n        if (prop==null)\n            throw new Error('Invalid operation. Update entity cannot be empty at this context.');\n        //set object to update\n        this.$update[prop] = obj;\n        return this;\n    }\n\n    /**\n     *\n     * @param props {...*}\n     * @returns {QueryExpression}\n     */\n    select(props) {\n\n        const args = Array.prototype.slice.call(arguments);\n        if (args.length==0)\n            return this;\n        if (_.isArray(args[0]) && args.length>1) {\n            throw new TypeError('Invalid arguments. Expected array only (for backward compatibility issues)')\n        }\n        let fields = [];\n        if (_.isArray(args[0])) {\n            //validate parameters\n            fields = args[0]\n        }\n        else {\n            fields = args;\n        }\n        //if entity is already defined\n        if (this[privatesProperty].entity)\n        {\n            //initialize $select property\n            this.$select = {};\n            //and set array of fields\n            this.$select[this[privatesProperty].entity] = fields;\n        }\n        else\n        {\n            //otherwise store array of fields in temporary property and wait\n            this[privatesProperty].fields = fields;\n        }\n        //delete other properties (if any)\n        delete this.$delete;\n        delete this.$insert;\n        delete this.$update;\n        return this;\n    }\n\n    /**\n     * Sets the entity of a select query expression\n     * @param entity {string|QueryEntity|*} A string that represents the entity name\n     * @returns {QueryExpression}\n     */\n    from(entity) {\n\n        if (entity==null)\n            return this;\n        let name;\n        if (entity instanceof QueryEntity) {\n            name  = entity.$as || entity.name;\n            this.$ref = this.$ref || {};\n            this.$ref[name] = entity;\n        }\n        else {\n            name = entity.valueOf();\n        }\n        if (this[privatesProperty].fields) {\n            //initialize $select property\n            this.$select = {};\n            //and set array of fields\n            this.$select[name] = this[privatesProperty].fields;\n        }\n        else {\n            this[privatesProperty].entity = name;\n        }\n        //delete other properties (if any)\n        delete this.$delete;\n        delete this.$insert;\n        delete this.$update;\n        //and return this object\n        return this;\n    }\n\n    /**\n     * Initializes a join expression with the specified entity\n     * @param {*} entity\n     * @param {Array=} props\n     * @param {String=} alias\n     * @returns {QueryExpression}\n     */\n    join(entity, props, alias) {\n\n        if (entity==null)\n            return this;\n        if (this.$select==null)\n            throw new Error('Query entity cannot be empty when adding a join entity.');\n        let obj = {};\n        if (entity instanceof QueryEntity) {\n            //do nothing (clone object)\n            obj = entity;\n        }\n        else if (entity instanceof QueryExpression) {\n            //do nothing (clone object)\n            obj = entity;\n        }\n        else {\n            obj[entity] = props || [];\n            if (typeof alias === 'string')\n                obj.$as=alias;\n        }\n        this[privatesProperty].expand =  { $entity: obj };\n        //and return this object\n        return this;\n    }\n\n    /**\n     * Sets the join expression of the last join entity\n     * @param obj {Array|*}\n     * @returns {QueryExpression}\n     */\n    with(obj) {\n\n        if (obj==null)\n            return this;\n        if (this[privatesProperty].expand==null)\n            throw new Error('Join entity cannot be empty when adding a join expression. Use QueryExpression.join(entity, props) before.');\n        if (obj instanceof QueryExpression)\n        {\n            /**\n             * @type {QueryExpression}\n             */\n            const expr = obj;\n\n            let where = null;\n            if (expr.$where)\n                where = expr.$prepared ? { $and: [expr.$prepared, expr.$where] } : expr.$where;\n            else if (expr.$prepared)\n                where = expr.$prepared;\n            this[privatesProperty].expand.$with = where;\n        }\n        else {\n            this[privatesProperty].expand.$with = obj;\n        }\n        if (this.$expand==null) {\n            this.$expand = this[privatesProperty].expand;\n        }\n        else {\n            if (_.isArray(this.$expand)) {\n                this.$expand.push(this[privatesProperty].expand);\n            }\n            else {\n                //get expand object\n                const expand = this.$expand;\n                //and create array of expand objects\n                this.$expand = [expand, this[privatesProperty].expand];\n            }\n        }\n        //destroy temp object\n        this[privatesProperty].expand = null;\n        //and return QueryExpression\n        return this;\n    }\n\n    /**\n     * Applies an ascending ordering to a query expression\n     * @param name {string|Array}\n     * @returns {QueryExpression}\n     */\n    orderBy(name) {\n\n        if (name==null)\n            return this;\n        if (this.$order==null)\n            this.$order = [];\n        this.$order.push({ $asc: name });\n        return this;\n    }\n\n    /**\n     * Applies a descending ordering to a query expression\n     * @param name\n     * @returns {QueryExpression}\n     */\n    orderByDescending(name) {\n\n        if (name==null)\n            return this;\n        if (this.$order==null)\n            this.$order = [];\n        this.$order.push({ $desc: name });\n        return this;\n    }\n\n    /**\n     * Performs a subsequent ordering in a query expression\n     * @param name {string|Array}\n     * @returns {QueryExpression}\n     */\n    thenBy(name) {\n\n        if (name==null)\n            return this;\n        if (this.$order==null)\n        //throw exception (?)\n            return this;\n        this.$order.push({ $asc: name });\n        return this;\n    }\n\n    /**\n     * Performs a subsequent ordering in a query expression\n     * @param name {string|Array}\n     * @returns {QueryExpression}\n     */\n    thenByDescending(name) {\n\n        if (name==null)\n            return this;\n        if (this.$order==null)\n        //throw exception (?)\n            return this;\n        this.$order.push({ $desc: name });\n        return this;\n    }\n\n    /**\n     *\n     * @param name {string|Array}\n     * @returns {QueryExpression}\n     */\n    groupBy(name) {\n\n        if (name==null)\n            return this;\n        if (this.$group==null)\n            this.$group = [];\n        const self = this;\n        if (_.isArray(name)) {\n            _.forEach(name, function (x) {\n                if (x)\n                    self.$group.push(x);\n            });\n        }\n        else\n            this.$group.push(name);\n        return this;\n    }\n\n    /**\n     * @param expr\n     * @private\n     */\n    __append(expr) {\n        if (!expr)\n            return;\n        if (!this.$where) {\n            this.$where = expr;\n        }\n        else {\n            const op = this[privatesProperty].expr;\n            if (op) {\n                //get current operator\n                const keys = _.keys(this.$where);\n                if (keys[0]==op) {\n                    this.$where[op].push(expr);\n                }\n                else {\n                    const newFilter = {};\n                    newFilter[op] = [this.$where, expr];\n                    this.$where = newFilter;\n                }\n            }\n        }\n        delete this[privatesProperty].prop;\n        delete this[privatesProperty].expr;\n        delete this[privatesProperty].aggr;\n    }\n\n    /**\n     * @param name {string|QueryField}\n     * @returns {QueryExpression}\n     */\n    or(name) {\n        if (_.isNil(name))\n            throw new Error('Left operand cannot be empty. Expected string or object.');\n        if (typeof name === 'string') {\n            this.prop(name);\n        }\n        else if (typeof name === 'object') {\n            this.prop(QueryField.prototype.nameOf.call(name))\n        }\n        else {\n            throw new Error('Invalid left operand. Expected string or object.');\n        }\n        this[privatesProperty].expr = '$or';\n        return this;\n    }\n\n    /**\n     * @param name {string|QueryField|*}\n     * @returns {QueryExpression}\n     */\n    and(name) {\n        if (_.isNil(name))\n            throw new Error('Left operand cannot be empty. Expected string or object.');\n        if (typeof name === 'string') {\n            this.prop(name);\n        }\n        else if (typeof name === 'object') {\n            this.prop(QueryField.prototype.nameOf.call(name))\n        }\n        else {\n            throw new Error('Invalid left operand. Expected string or object.');\n        }\n        this[privatesProperty].expr = '$and';\n        return this;\n    }\n\n    /**\n     * Prepares an equal expression.\n     * @example\n     * q.where('id').equal(10) //id=10 expression\n     * @param {*} value - A value that represents the right part of the prepared expression\n     * @returns {QueryExpression}\n     */\n    equal(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = value;\n            //apply aggregation if any\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, value);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * Prepares a not equal expression.\n     * @example\n     * q.where('id').notEqual(10) //id<>10 expression\n     * @param {*} value - A value that represents the right part of the prepared expression\n     * @returns {QueryExpression}\n     */\n    notEqual(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $ne:value };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr,{ $ne:value });\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * Prepares an in statement expression\n     * @example\n     * q.where('id').in([10, 11, 12]) //id in (10,11,12) expression\n     * @param {Array} values - An array of values that represents the right part of the prepared expression\n     * @returns {QueryExpression}\n     */\n    in(values) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $in : values };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * Prepares a not in statement expression\n     * @example\n     * q.where('id').notIn([10, 11, 12]) //id in (10,11,12) expression\n     * @param {Array} values - An array of values that represents the right part of the prepared expression\n     * @returns {QueryExpression}\n     */\n    notIn(values) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $nin : values };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr,{ $nin : values });\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param {*} value The value to be compared\n     * @param {Number} result The result of modulo expression\n     * @returns {QueryExpression}\n     */\n    mod(value, result) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $mod : [ value, result] };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param {*} value The value to be compared\n     * @param {Number} result The result of a bitwise and expression\n     * @returns {QueryExpression}\n     */\n    bit(value, result) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $bit : [ value, result] };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param value {*}\n     * @returns {QueryExpression}\n     */\n    greaterThan(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $gt:value };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param {string} value\n     * @returns {QueryExpression}\n     */\n    startsWith(value) {\n        const p0 = this.prop();\n        let r;\n        if (p0) {\n            if (!_.isString(value)) {\n                throw new Error('Invalid argument. Expected string.')\n            }\n            let comparison = { $regex : '^' + value, $options:'i' };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr,{ $regex : '^' + value, $options:'i' });\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param value {*}\n     * @returns {QueryExpression}\n     */\n    endsWith(value) {\n        const p0 = this.prop();\n        let r;\n        if (p0) {\n            if (!_.isString(value)) {\n                throw new Error('Invalid argument. Expected string.');\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, { $regex : value + '$', $options:'i' });\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * Prepares a contains expression.\n     * @example\n     * var qry = require('most-query');\n     * var q = qry.query('Person').where('first').contains('om').select(['id','first', 'last']);\n     * var formatter = new qry.classes.SqlFormatter();\n     * console.log(formatter.format(q));\n     * //returns SELECT Person.id, Person.first, Person.last FROM Person WHERE ((first REGEXP 'om')=true)\n     * @param  {*} value - A value that represents the right part of the expression\n     * @returns {QueryExpression}\n     */\n    contains(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $text: { $search: value } };\n            //apply aggregation if any\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison );\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    notContains(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $text: { $search: value } };\n            //apply aggregation if any\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = { $not: QueryFieldComparer.prototype.compareWith.call(p0, comparison) };\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param value {*}\n     * @returns {QueryExpression}\n     */\n    lowerThan(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $lt:value };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param value {*}\n     * @returns {QueryExpression}\n     */\n    lowerOrEqual(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $lte:value };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param value {*}\n     * @returns {QueryExpression}\n     */\n    greaterOrEqual(value) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison = { $gte:value };\n            if (typeof this.aggr === 'object') {\n                comparison = QueryFieldAggregator.prototype.wrapWith.call(this.aggr, comparison);\n                delete this.aggr;\n            }\n            const expr = QueryFieldComparer.prototype.compareWith.call(p0, comparison);\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * @param {*} value1\n     * @param {*} value2\n     * @returns {QueryExpression}\n     */\n    between(value1, value2) {\n        const p0 = this.prop();\n        if (p0) {\n            let comparison1 = { $gte:value1}, comparison2 = { $lte:value2 };\n            if (typeof this.aggr === 'object') {\n                comparison1 = QueryFieldAggregator.prototype.wrapWith({ $gte:value1} );\n                comparison2 = QueryFieldAggregator.prototype.wrapWith({ $lte:value2} );\n                delete this.aggr\n            }\n            const comp1 = QueryFieldComparer.prototype.compareWith.call(p0, comparison1);\n            const comp2 = QueryFieldComparer.prototype.compareWith.call(p0, comparison2);\n            const expr = {};\n            expr['$and'] = [ comp1, comp2 ];\n            this.__append(expr);\n        }\n        return this;\n    }\n\n    /**\n     * Skips the specified number of objects during select.\n     * @param {Number} n\n     * @returns {QueryExpression}\n     */\n    skip(n) {\n        this.$skip = isNaN(n) ? 0 : n;\n        return this;\n    }\n\n    /**\n     * Takes the specified number of objects during select.\n     * @param {Number} n\n     * @returns {QueryExpression}\n     */\n    take(n) {\n        this.$take = isNaN(n) ? 0 : n;\n        return this;\n    }\n\n    /**\n     * @private\n     * @param {number|*} number\n     * @param {number} length\n     * @returns {*}\n     */\n    static zeroPad(number, length) {\n        number = number || 0;\n        let res = number.toString();\n        while (res.length < length) {\n            res = '0' + res;\n        }\n        return res;\n    }\n\n    /**\n     * @param {number|*} x\n     * @returns {QueryExpression}\n     */\n    add(x) {\n        this.aggr = { $add:[ x, new QueryParameter() ] };\n        return this;\n    }\n\n    /**\n     * @param {number|*} x\n     * @returns {QueryExpression}\n     */\n    subtract(x) {\n        this.aggr = { $subtract:[ x, new QueryParameter() ] };\n        return this;\n    }\n\n    /**\n     * @param {number} x\n     * @returns {QueryExpression}\n     */\n    multiply(x) {\n        this.aggr = { $multiply:[ x, new QueryParameter() ] };\n        return this;\n    }\n\n    /**\n     * @param {number} x\n     * @returns {QueryExpression}\n     */\n    divide(x) {\n        this.aggr = { $divide:[ x, new QueryParameter() ] };\n        return this;\n    }\n\n    /**\n     * @param {number=} n\n     * @returns {QueryExpression}\n     */\n    round(n) {\n        this.aggr = { $round:[ n, new QueryParameter() ] };\n        return this;\n    }\n\n    /**\n     * @param {number} start\n     * @param {number=} length\n     * @returns {QueryExpression}\n     */\n    substr(start, length) {\n        this.aggr = { $substr:[ start, length, new QueryParameter() ] };\n        return this;\n    }\n\n    /**\n     * @param {string} s\n     * @returns {QueryExpression}\n     */\n    indexOf(s) {\n        this.aggr = { $indexOf:[ s, new QueryParameter() ] };\n        return this;\n    }\n\n    /**\n     * @param {string|*} s\n     * @returns {QueryExpression}\n     */\n    concat(s) {\n        this.aggr = { $concat:[ s, new QueryParameter()] };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    trim() {\n        this.aggr = { $trim: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    length() {\n        this.aggr = { $length: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    getDate() {\n        this.aggr = { $date: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    getYear() {\n        this.aggr = { $year: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    getMonth() {\n        this.aggr = { $month: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    getDay() {\n        this.aggr = { $dayOfMonth: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    getHours() {\n        this.aggr = { $hour: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    getMinutes() {\n        this.aggr = { $minutes: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    getSeconds() {\n        this.aggr = { $seconds: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    floor() {\n        this.aggr = { $floor: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    ceil() {\n        this.aggr = { $ceiling: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    toLocaleLowerCase() {\n        this.aggr = { $toLower: new QueryParameter() };\n        return this;\n    }\n\n    /**\n     * @returns {QueryExpression}\n     */\n    toLocaleUpperCase() {\n        this.aggr = { $toUpper: new QueryParameter() };\n        return this;\n    }\n\n    static escape(val) {\n        if (val === undefined || val === null) {\n            return 'null';\n        }\n\n        switch (typeof val) {\n            case 'boolean': return (val) ? 'true' : 'false';\n            case 'number': return val+'';\n        }\n\n        if (val instanceof Date) {\n            const dt = new Date(val);\n            const year   = dt.getFullYear();\n            const month  = QueryExpression.zeroPad(dt.getMonth() + 1, 2);\n            const day    = QueryExpression.zeroPad(dt.getDate(), 2);\n            const hour   = QueryExpression.zeroPad(dt.getHours(), 2);\n            const minute = QueryExpression.zeroPad(dt.getMinutes(), 2);\n            const second = QueryExpression.zeroPad(dt.getSeconds(), 2);\n            const millisecond = QueryExpression.zeroPad(dt.getMilliseconds(), 3);\n            val = year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second + '.' + millisecond;\n        }\n\n        if (typeof val === 'object' && Object.prototype.toString.call(val) === '[object Array]') {\n            const values = [];\n            _.forEach(val, function(x) {\n                QueryExpression.escape(x);\n            });\n            return values.join(',');\n        }\n\n        if (typeof val === 'object') {\n            if (val.hasOwnProperty('$name'))\n            //return field identifier\n                return val['$name'];\n            else\n                return this.escape(val.valueOf())\n        }\n\n        val = val.replace(/[\\0\\n\\r\\b\\t\\\\\\'\\\"\\x1a]/g, function(s) {\n            switch(s) {\n                case \"\\0\": return \"\\\\0\";\n                case \"\\n\": return \"\\\\n\";\n                case \"\\r\": return \"\\\\r\";\n                case \"\\b\": return \"\\\\b\";\n                case \"\\t\": return \"\\\\t\";\n                case \"\\x1a\": return \"\\\\Z\";\n                default: return \"\\\\\"+s;\n            }\n        });\n        return \"'\"+val+\"'\";\n    }\n}\n\n/**\n * Represents an enumeration of comparison query operators\n * @type {*}\n */\nQueryExpression.ComparisonOperators = { $eq:'$eq', $ne:'$ne', $gt:'$gt',$gte:'$gte', $lt:'$lt',$lte:'$lte', $in: '$in', $nin:'$nin' };\n/**\n * Represents an enumeration of logical query operators\n * @type {*}\n */\nQueryExpression.LogicalOperators = { $or:'$or', $and:'$and', $not:'$not', $nor:'$not' };\n/**\n * Represents an enumeration of evaluation query operators\n * @type {*}\n */\nQueryExpression.EvaluationOperators = { $mod:'$mod', $add:'$add', $sub:'$sub', $mul:'$mul', $div:'$div' };\n\n/**\n * Prepares an equal expression.\n * @example\n * q.where('id').eq(10) //id=10 expression\n * @param {*} value\n * @returns {QueryExpression}\n */\nQueryExpression.prototype.eq = QueryExpression.prototype.equal;\n\n\nQueryExpression.prototype.ne = QueryExpression.prototype.notEqual;\n\nQueryExpression.prototype.gt = QueryExpression.prototype.greaterThan;\n/**\n * @param value {*}\n * @returns {QueryExpression}\n */\nQueryExpression.prototype.lt = QueryExpression.prototype.lowerThan;\n\nQueryExpression.prototype.lte = QueryExpression.prototype.lowerOrEqual;\n/**\n * @param value {*}\n * @returns {QueryExpression}\n */\nQueryExpression.prototype.gte = QueryExpression.prototype.greaterOrEqual;\n\n/**\n * @class\n */\nexport class QueryEntity {\n    /**\n     * @constructor\n     * @param {string|*} obj\n     */\n    constructor(obj) {\n        const entity = obj || 'Table';\n        this[entity] = [];\n        Object.defineProperty(this, 'name', {\n            get: function() {\n                return entity;\n            }, configurable:false, enumerable:false\n        });\n        const self = this;\n        Object.defineProperty(this, 'props', {\n            get: function() {\n                return self[entity];\n            }, configurable:false, enumerable:false\n        });\n    }\n    /**\n     * Creates an entity reference that is going to be used in query expressions.\n     * @param {string} entity - The entity name\n     * @param {Array=} fields - An array that represents the entity's field collection to be used.\n     * @returns {QueryEntity|*}\n     */\n    static create(entity, fields) {\n        const obj = new QueryEntity(entity);\n        obj[entity] = fields || [];\n        return obj;\n    }\n\n    select(name) {\n        const f = new QueryField(name);\n        return f.from(this.$as ? this.$as : this.name);\n    }\n\n    as(alias) {\n        this.$as = alias;\n        return this;\n    }\n\n    inner() {\n        this.$join = 'inner';\n        return this;\n    }\n\n    left() {\n        this.$join = 'left';\n        return this;\n    }\n\n    right() {\n        this.$join = 'right';\n        return this;\n    }\n}\n/**\n * @class\n * @property $value - The underlying value\n */\nexport class QueryValue {\n\n    /**\n     * @constructor\n     * @param {*=} value\n     */\n    constructor(value) {\n        this.$value = value;\n    }\n\n    /**\n     * Creates a new query value\n     * @param value\n     * @returns {QueryValue}\n     */\n    static create(value) {\n        return new QueryValue(value);\n    }\n\n}\n\n/**\n * @class\n */\nexport class QueryField {\n    /**\n     * @constructor\n     * @param {string=} obj\n     */\n    constructor(obj) {\n        if (typeof  obj === 'string') {\n            this.$name = obj;\n        }\n        else if (typeof obj === 'object' && obj!=null) {\n            _.assign(this, obj);\n        }\n    }\n\n    /**\n     * Creates a query field of the given entity\n     * @param {string} entity\n     * @param {string} name\n     * @returns {QueryField}\n     */\n    static create(entity, name) {\n        if (!_.isString(entity)) { throw new TypeError('Field entity must be a valid string'); }\n        if (!_.isString(name)) { throw new TypeError('Field name must be a valid string'); }\n        const f = new QueryField(name);\n        return f.from(entity);\n    }\n\n    /**\n     * @param name {string} The name of the field that is going to be selected\n     * @returns {QueryField}\n     */\n    select(name) {\n        if (typeof name != 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //clear object\n        _empty(this);\n        // field as string e.g. { $name: 'price' }\n        this.$name = name;\n        return this;\n    }\n\n    /**\n     * Sets the entity of the current field\n     * @param entity {string}\n     * @returns {QueryField}\n     */\n    from(entity) {\n        let name;\n        if (typeof entity !== 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //get property\n        if (!_.isNil(this.$name))\n        {\n            if (typeof this.$name === 'string') {\n                //check if an entity is already defined\n                name = this.$name;\n                if (QueryField.fieldNameExpression.test(name))\n                //if not append entity name\n                    this.$name = entity.concat('.', name);\n                else\n                //split field name and add entity\n                    this.$name = entity.concat('.', name.split('.')[1]);\n            }\n            else\n                throw new Error(\"Invalid field definition.\");\n        }\n        else {\n            //get default property\n            const alias = _.findKey(this);\n            if (_.isNil(alias))\n                throw new Error(\"Field definition cannot be empty at this context\");\n            //get field expression\n            const expr = this[alias];\n            //get field name\n            const aggregate = _.findKey(expr);\n            if (_.isNil(aggregate))\n                throw new Error(\"Field expression cannot be empty at this context\");\n            name = expr[aggregate];\n            if (QueryField.fieldNameExpression.test(name))\n            //if not append entity name\n                expr[aggregate] = entity.concat('.', name);\n            else\n            //split field name and add entity\n                expr[aggregate] = entity.concat('.', name.split('.')[1]);\n        }\n        return this;\n    }\n\n    count(name) {\n        if (typeof name != 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //clear object\n        _empty(this);\n        // field as aggregate function e.g. { price: { $count: 'price' } }\n        this[name] = { $count: name };\n        return this;\n    }\n\n    /**\n     * @param {...string} [strings]\n     * @return {string}\n     */\n    concat(strings) {\n        return this.$name.concat(strings)\n    }\n\n    sum(name) {\n        if (typeof name != 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //clear object\n        _empty(this);\n        // field as aggregate function e.g. { price: { $sum: 'price' } }\n        this[name] = { $sum: name };\n        return this;\n    }\n\n    min(name) {\n        if (typeof name != 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //clear object\n        _empty(this);\n        // field as aggregate function e.g. { price: { $min: 'price' } }\n        this[name] = { $min: name };\n        return this;\n    }\n\n    average(name) {\n        if (typeof name != 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //clear object\n        _empty(this);\n        // field as aggregate function e.g. { price: { $avg: 'price' } }\n        this[name] = { $avg: name };\n        return this;\n    }\n\n    max(name) {\n        if (typeof name != 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //clear object\n        _empty(this);\n        // field as aggregate function e.g. { price: { $max: 'price' } }\n        this[name] = { $max: name };\n        return this;\n    }\n\n    /**\n     *\n     * @param {String=} alias\n     * @returns {QueryField|String}\n     */\n    as(alias) {\n        if (typeof alias === 'undefined')\n        {\n            if (typeof this.$name !== 'undefined')\n                return null;\n            const keys = _.keys(this);\n            if (keys.length==0)\n                return null;\n            else\n                return keys[0];\n        }\n        if (typeof alias != 'string')\n            throw  new Error('Invalid argument. Expected string');\n        //get first property\n        const prop = _.findKey(this);\n        if (prop == null)\n            throw  new Error('Invalid object state. Field is not selected.');\n        const value = this[prop];\n        if (prop!=alias) {\n            this[alias] = value;\n            delete this[prop];\n        }\n        return this;\n    }\n\n    name() {\n        let name = null;\n        if (typeof this.$name === 'string') {\n            name = this.$name\n        }\n        else {\n            const prop = _.findKey(this);\n            if (prop) {\n                name = this[prop];\n            }\n        }\n        if (typeof name === 'string') {\n            //check if an entity is already defined\n            const re = new RegExp(QueryField.fieldNameExpression.source);\n            if (re.test(name))\n                return name;\n            else\n                return name.split('.')[1];\n        }\n        return null;\n    }\n\n    nameOf() {\n\n        if ((typeof this === 'string') || (this instanceof String)) {\n            return this;\n        }\n        let alias;\n        if (typeof this.as === 'function')\n            alias = this.as();\n        else\n            alias = QueryField.prototype.as.call(this);\n\n        if (alias) {\n            return this[alias];\n        }\n        else {\n            return this.$name;\n        }\n    }\n\n    valueOf() {\n        return this.$name;\n    }\n\n    /**\n     * @param name {string}\n     * @returns {QueryField}\n     */\n    static select(name) {\n        return new QueryField(name);\n    }\n\n    /**\n     * @param name {string}\n     * @returns {QueryField}\n     */\n    static count(name) {\n        const f = new QueryField();\n        return f.count(name);\n    }\n\n    /**\n     * @param name {string}\n     * @returns {QueryField}\n     */\n    static min(name) {\n        const f = new QueryField();\n        return f.min(name);\n    }\n\n    /**\n     * @param name {string}\n     * @returns {QueryField}\n     */\n    static max(name) {\n        const f = new QueryField();\n        return f.max(name);\n    }\n\n    /**\n     * @param name {string}\n     * @returns {QueryField}\n     */\n    static average(name) {\n        const f = new QueryField();\n        return f.average(name);\n    }\n\n    /**\n     * @param name {string}\n     * @returns {QueryField}\n     */\n    static sum(name) {\n        const f = new QueryField();\n        return f.sum(name);\n    }\n}\n\nQueryField.fieldNameExpression = /^[A-Za-z_0-9]+$/;\n\n/**\n * @class\n */\nclass QueryFieldComparer {\n    /**\n     *\n     * @param {*} comparison\n     * @returns {*}\n     */\n    compareWith(comparison) {\n        const expr = { };\n        if ((typeof this === 'string') || (this instanceof String)) {\n            expr[this] = comparison;\n            return expr;\n        }\n\n        //get aggregate function\n        const aggr = _.findKey(this);\n\n        let name;\n        if (_.isArray(this[aggr])) {\n            //get first element (the field name)\n            name = QueryField.prototype.nameOf.call(this[aggr][0]);\n        }\n        else {\n            //get element (the field name)\n            name = QueryField.prototype.nameOf.call(this[aggr]);\n        }\n        expr[name] = { };\n        expr[name][aggr] = comparison;\n        return expr;\n    }\n\n    wrapWithAggregate(aggr, comparison) {\n    }\n}\n\n/**\n * @class\n * @property {string} $model - Gets or sets a string which represents the target model\n * @property {string} $filter - Gets or sets a string which represents a filter statement assigned to the current data query\n * @property {number} $top - Gets or sets an integer which represents the number of records to get\n * @property {number} $skip - Gets or sets an integer which represents the number of records to skip\n */\nexport class OpenDataQuery {\n    /**\n     * @constructor\n     */\n    constructor() {\n\n        /**\n         * @private\n         */\n        this[privatesProperty] = {};\n    }\n\n    /**\n     * @private\n     * @returns OpenDataQuery\n     */\n    append() {\n        let exprs;\n        const self = this;\n        if (self[privatesProperty].left) {\n            let expr = null;\n\n            if (self[privatesProperty].op=='in') {\n                if (_.isArray(self[privatesProperty].right)) {\n                    //expand values\n                    exprs = [];\n                    _.forEach(self[privatesProperty].right, function(x) {\n                        exprs.push(self[privatesProperty].left + ' eq ' + QueryExpression.escape(x));\n                    });\n                    if (exprs.length>0)\n                        expr = '(' + exprs.join(' or ') + ')';\n                }\n            }\n            else if (self[privatesProperty].op=='nin') {\n                if (_.isArray(self[privatesProperty].right)) {\n                    //expand values\n                    exprs = [];\n                    _.forEach(self[privatesProperty].right, function(x) {\n                        exprs.push(self[privatesProperty].left + ' ne ' + QueryExpression.escape(x));\n                    });\n                    if (exprs.length>0)\n                        expr = '(' + exprs.join(' and ') + ')';\n                }\n            }\n            else\n                expr = self[privatesProperty].left + ' ' + self[privatesProperty].op + ' ' + QueryExpression.escape(self[privatesProperty].right);\n            if (expr) {\n                if (_.isNil(self.$filter))\n                    self.$filter = expr;\n                else {\n                    self[privatesProperty].lop = self[privatesProperty].lop || 'and';\n                    self[privatesProperty]._lop = self[privatesProperty]._lop || self[privatesProperty].lop;\n                    if (self[privatesProperty]._lop == self[privatesProperty].lop)\n                        self.$filter = self.$filter + ' ' + self[privatesProperty].lop + ' ' + expr;\n                    else\n                        self.$filter = '(' + self.$filter + ') ' + self[privatesProperty].lop + ' ' + expr;\n                    self[privatesProperty]._lop = self[privatesProperty].lop;\n                }\n            }\n        }\n        delete self[privatesProperty].lop;delete self[privatesProperty].left; delete self[privatesProperty].op; delete self[privatesProperty].right;\n        return this;\n    }\n\n    /**\n     * @param {Array|String} attr\n     * @returns OpenDataQuery\n     */\n    select(attr) {\n        if (_.isArray(attr)) {\n            this.$select = attr.join(',');\n        }\n        else\n            this.$select = attr;\n    }\n\n    /**\n     * @param {number} val\n     * @returns OpenDataQuery\n     */\n    take(val) {\n        this.$top = isNaN(val) ? 0 : val;\n        return this;\n    }\n\n    /**\n     * @param {number} val\n     * @returns OpenDataQuery\n     */\n    skip(val) {\n        this.$skip = isNaN(val) ? 0 : val;\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    orderBy(name) {\n        if (typeof name !=='undefined' || name!=null)\n            this.$orderby = name.toString();\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    orderByDescending(name) {\n        if (typeof name !=='undefined' || name!=null)\n            this.$orderby = name.toString() + ' desc';\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    thenBy(name) {\n        if (typeof name !=='undefined' || name!=null) {\n                this.$orderby += (this.$orderby ? ',' + name.toString() : name.toString());\n        }\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    thenByDescending(name) {\n        if (typeof name !=='undefined' || name!=null) {\n            this.$orderby += (this.$orderby ? ',' + name.toString() : name.toString()) + ' desc';\n        }\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    where(name) {\n        this[privatesProperty].left = name;\n        return this;\n    }\n\n    /**\n     * @param {String=} name\n     * @returns OpenDataQuery\n     */\n    and(name) {\n        this[privatesProperty].lop = 'and';\n        if (typeof name !== 'undefined')\n            this[privatesProperty].left = name;\n        return this;\n    }\n\n    /**\n     * @param {String=} name\n     * @returns OpenDataQuery\n     */\n    or(name) {\n        this[privatesProperty].lop = 'or';\n        if (typeof name !== 'undefined')\n            this[privatesProperty].left = name;\n        return this;\n    }\n\n    /**\n     * @param {*} value\n     * @returns OpenDataQuery\n     */\n    equal(value) {\n        this[privatesProperty].op = 'eq';this[privatesProperty].right = value; return this.append();\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    indexOf(name) {\n        this[privatesProperty].left = 'indexof(' + name + ')';\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    andIndexOf(name) {\n        this[privatesProperty].lop = 'and';\n        return this.indexOf(name);\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    orIndexOf(name) {\n        this[privatesProperty].lop = 'or';\n        return this.indexOf(name);\n    }\n\n    /**\n     * @param {*} name\n     * @param {*} s\n     * @returns OpenDataQuery\n     */\n    endsWith(name, s) {\n        this[privatesProperty].left = sprintf.sprintf('endswith(%s,%s)',name,QueryExpression.escape(s));\n        return this;\n    }\n\n    /**\n     * @param {*} name\n     * @param {*} s\n     * @returns OpenDataQuery\n     */\n    startsWith(name, s) {\n        this[privatesProperty].left = sprintf.sprintf('startswith(%s,%s)',name,QueryExpression.escape(s));\n        return this;\n    }\n\n    /**\n     * @param {*} name\n     * @param {*} s\n     * @returns OpenDataQuery\n     */\n    substringOf(name, s) {\n        this[privatesProperty].left = sprintf.sprintf('substringof(%s,%s)',name,QueryExpression.escape(s));\n        return this;\n    }\n\n    /**\n     * @param {*} name\n     * @param {number} pos\n     * @param {number} length\n     * @returns OpenDataQuery\n     */\n    substring(name, pos, length) {\n        this[privatesProperty].left = sprintf.sprintf('substring(%s,%s,%s)',name,pos,length);\n        return this;\n    }\n\n    /**\n     * @param {*} name\n     * @returns OpenDataQuery\n     */\n    length(name) {\n        this[privatesProperty].left = sprintf.sprintf('length(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {*} name\n     * @returns OpenDataQuery\n     */\n    toLower(name) {\n        this[privatesProperty].left = sprintf.sprintf('tolower(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {*} name\n     * @returns OpenDataQuery\n     */\n    toUpper(name) {\n        this[privatesProperty].left = sprintf.sprintf('toupper(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {*} name\n     * @returns OpenDataQuery\n     */\n    trim(name) {\n        this[privatesProperty].left = sprintf.sprintf('trim(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {*} s0\n     * @param {*} s1\n     * @param {*=} s2\n     * @param {*=} s3\n     * @param {*=} s4\n     * @returns OpenDataQuery\n     */\n    concat(s0, s1, s2, s3, s4) {\n        this[privatesProperty].left = 'concat(' + QueryExpression.escape(s0) + ',' + QueryExpression.escape(s1);\n        if (typeof s2 !== 'undefined')\n            this[privatesProperty].left +=',' + QueryExpression.escape(s2);\n        if (typeof s3 !== 'undefined')\n            this[privatesProperty].left +=',' + QueryExpression.escape(s3)\n        if (typeof s4 !== 'undefined')\n            this[privatesProperty].left +=',' + QueryExpression.escape(s4)\n        this[privatesProperty].left +=')';\n        return this;\n    }\n\n    field(name) {\n        return { \"$name\":name }\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    day(name) {\n        this[privatesProperty].left = sprintf.sprintf('day(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    hour(name) {\n        this[privatesProperty].left = sprintf.sprintf('hour(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    minute(name) {\n        this[privatesProperty].left = sprintf.sprintf('minute(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    month(name) {\n        this[privatesProperty].left = sprintf.sprintf('month(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    second(name) {\n        this[privatesProperty].left = sprintf.sprintf('second(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    year(name) {\n        this[privatesProperty].left = sprintf.sprintf('year(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    round(name) {\n        this[privatesProperty].left = sprintf.sprintf('round(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    floor(name) {\n        this[privatesProperty].left = sprintf.sprintf('floor(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {String} name\n     * @returns OpenDataQuery\n     */\n    ceiling(name) {\n        this[privatesProperty].left = sprintf.sprintf('ceil(%s)',name);\n        return this;\n    }\n\n    /**\n     * @param {*} value\n     * @returns OpenDataQuery\n     */\n    notEqual(value) {\n        this[privatesProperty].op = 'ne';this[privatesProperty].right = value; return this.append();\n    }\n\n    /**\n     * @param {*} value\n     * @returns OpenDataQuery\n     */\n    greaterThan(value) {\n        this[privatesProperty].op = 'gt';this[privatesProperty].right = value; return this.append();\n    }\n\n    /**\n     * @param {*} value\n     * @returns OpenDataQuery\n     */\n    greaterOrEqual(value) {\n        this[privatesProperty].op = 'ge';this[privatesProperty].right = value; return this.append();\n    }\n\n    /**\n     * @param {*} value\n     * @returns OpenDataQuery\n     */\n    lowerThan(value) {\n        this[privatesProperty].op = 'lt';this[privatesProperty].right = value; return this.append();\n    }\n\n    /**\n     * @param {*} value\n     * @returns OpenDataQuery\n     */\n    lowerOrEqual(value) {\n        this[privatesProperty].op = 'le';this[privatesProperty].right = value; return this.append();\n    }\n\n    /**\n     * @param {Array} values\n     * @returns OpenDataQuery\n     */\n    in(values) {\n        this[privatesProperty].op = 'in';this[privatesProperty].right = values; return this.append();\n    }\n\n    /**\n     * @param {Array} values\n     * @returns OpenDataQuery\n     */\n    notIn(values) {\n        this[privatesProperty].op = 'nin';this[privatesProperty].right = values; return this.append();\n    }\n}\n"]}