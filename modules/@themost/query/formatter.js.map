{"version":3,"sources":["formatter.es6"],"names":["SqlUtils","sprintf","_","QueryExpression","QueryField","SqlFormatter","provider","settings","nameFormat","forceAlias","comparison","Date","concat","escape","compares","key","hasOwnProperty","push","length","arr","op","i","ComparisonOperators","undefined","Error","escapedValue","join","obj","findKey","test","value","unquoted","escapeName","$name","valueOf","where","self","keys","property","propertyValue","formatWhere","separator","isArray","map","x","sql","isQueryField_","$eq","escapedProperty","$text","$search","$gt","$gte","$lt","$lte","$ne","$regex","$in","sq","assign","$select","format","$nin","fn","p0","p1","args","argn","j","isComparison","f0","apply","formatComparison","replace","isNil","pos","toString","$this","escapedEntity","entity","joins","$expand","fields","$ref","entityRef","$as","name","$fixed","$distinct","forEach","$entity","$alias","table","joinType","$join","toUpperCase","$with","left","right","leftTable","rightTable","leftFields","rightFields","leftExpr","rightExpr","formatField","isObject","$where","$prepared","where1","$and","$group","formatGroupBy","$order","formatOrder","formatSelect","$take","$skip","escapeConstant","tableName","fieldNameExpression","f","$desc","$asc","a","$insert","obj1","props","prop","$update","$delete","useAlias","expr","alias","s","field","select","formatFieldEx","query","hasPaging","formatLimitSelect","formatInsert","formatUpdate","formatDelete","prototype","$indexOf","$indexof","$substr","$substring","$toLower","$tolower","$toUpper","$toupper","$dayOfMonth","$day","$minutes","$minute","$seconds","$second","$subtract","$sub","$multiply","$mul","$divide","$div","constructor"],"mappings":"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","file":"formatter.js","sourcesContent":["/**\n * @license\n * MOST Web Framework 2.0 Codename Blueshift\n * Copyright (c) 2014, Kyriakos Barbounakis k.barbounakis@gmail.com\n *                     Anthi Oikonomou anthioikonomou@gmail.com\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\n'use strict';\nimport 'source-map-support/register';\nimport {SqlUtils} from './utils';\nimport sprintf from 'sprintf';\nimport {_} from 'lodash';\nimport {QueryExpression,QueryField} from './query';\n/**\n * Initializes an SQL formatter class.\n * @class\n */\nexport class SqlFormatter {\n    /**\n     * @constructor\n     */\n    constructor() {\n        //\n        this.provider = null;\n        /**\n         * Gets or sets formatter settings\n         * @type {{nameFormat: string}|*}\n         */\n        this.settings = {\n            /**\n             * Gets or sets a format that is going to be applied in field expression e.g. AS [$1] or AS '$1'.\n             * @type {string}\n             */\n            nameFormat : '$1',\n            /**\n             * Gets or sets a boolean that indicates whether field aliases will forcibly be used even if field expression does not have any alias\n             * (e.g. SELECT Person.name as name or SELECT Person.name).\n             * @type {boolean}\n             */\n            forceAlias: false\n        }\n    }\n\n\n    /**\n     * Formats a JSON comparison object to the equivalent sql expression eg. { $gt: 100} as >100, or { $in:[5, 8] } as IN {5,8} etc\n     * @param {*} comparison\n     * @returns {string}\n     */\n    formatComparison(comparison) {\n        if (comparison==null || typeof comparison=== 'undefined')\n            return '(%s IS NULL)';\n        if (typeof comparison === 'object')\n        {\n            if (comparison instanceof Date) {\n                return '(%s'.concat(sprintf.sprintf('=%s)',this.escape(comparison)));\n            }\n            const compares = [];\n            for(var key in comparison) {\n                if (comparison.hasOwnProperty(key))\n                    compares.push(key);\n            }\n            if (compares.length==0)\n                return '(%s IS NULL)';\n            else {\n                const arr = [], op = '=';\n                for (let i = 0; i < compares.length; i++) {\n                    var key = compares[i];\n                    if (QueryExpression.ComparisonOperators[key]===undefined)\n                        throw new Error(sprintf.sprintf('Unknown operator %s.', key));\n                    const escapedValue = this.escape(comparison[key]);\n                    switch (key) {\n                        case '$eq': arr.push('(%s'.concat('=',escapedValue,')'));break;\n                        case '$lt': arr.push('(%s'.concat('<',escapedValue,')'));break;\n                        case '$lte': arr.push('(%s'.concat('<=',escapedValue,')'));break;\n                        case '$gt': arr.push('(%s'.concat('>',escapedValue,')'));break;\n                        case '$gte': arr.push('(%s'.concat('>=',escapedValue,')'));break;\n                        case '$ne': arr.push('(NOT %s'.concat('=',escapedValue,')'));break;\n                        case '$in': arr.push('(%s'.concat('(',escapedValue,'))'));break;\n                        case '$nin':arr.push('(NOT %s'.concat('(',escapedValue,'))'));break;\n                    }\n                }\n                //join expression\n                if (arr.length==1)\n                    return arr[0];\n                else if (arr.length>1) {\n                    return '('.concat(arr.join(' AND '),')');\n                }\n                else\n                    return '(%s IS NULL)';\n            }\n        }\n        else\n        {\n            return '(%s'.concat(sprintf.sprintf('=%s)',this.escape(comparison)));\n        }\n    }\n\n    isComparison(obj) {\n        const key = _.findKey(obj);\n        return (/^\\$(eq|ne|lt|lte|gt|gte|in|nin|text|regex)$/g.test(key));\n    }\n\n    /**\n     * Escapes an object or a value and returns the equivalent sql value.\n     * @param {*} value - A value that is going to be escaped for SQL statements\n     * @param {boolean=} unquoted - An optional value that indicates whether the resulted string will be quoted or not.\n     * @returns {string} - The equivalent SQL string value\n     */\n    escape(value, unquoted) {\n        if (value==null || typeof value==='undefined')\n            return SqlUtils.escape(null);\n\n        if (typeof value === 'object')\n        {\n            //add an exception for Date object\n            if (value instanceof Date)\n                return SqlUtils.escape(value);\n            if (value.hasOwnProperty('$name'))\n                return this.escapeName(value.$name);\n        }\n        if (unquoted)\n            return value.valueOf();\n        else\n            return SqlUtils.escape(value);\n    }\n\n    /**\n     * Escapes an object or a value and returns the equivalent sql value.\n     * @param {*} value - A value that is going to be escaped for SQL statements\n     * @param {boolean=} unquoted - An optional value that indicates whether the resulted string will be quoted or not.\n     * returns {string} - The equivalent SQL string value\n     */\n    escapeConstant(value, unquoted) {\n        return this.escape(value,unquoted);\n    }\n\n    /**\n     * Formats a where expression object and returns the equivalen SQL string expression.\n     * @param {*} where - An object that represents the where expression object to be formatted.\n     * @returns {string|*}\n     */\n    formatWhere(where) {\n        const self = this;\n\n        //get expression (the first property of the object)\n        const keys = _.keys(where), property = keys[0];\n        if (typeof property === 'undefined')\n            return '';\n        //get property value\n        const propertyValue = where[property];\n        switch (property) {\n            case '$not':\n                return '(NOT ' + self.formatWhere(propertyValue) + ')';\n                break;\n            case '$and':\n            case '$or':\n                const separator = property=='$or' ? ' OR ' : ' AND ';\n                //property value must be an array\n                if (!_.isArray(propertyValue))\n                    throw new Error('Invalid query argument. A logical expression must contain one or more comparison expressions.');\n                if (propertyValue.length==0)\n                    return '';\n                return '(' + _.map(propertyValue, function(x) {\n                    return self.formatWhere(x);\n                }).join(separator) + ')';\n                break;\n            default:\n                let comparison = propertyValue;\n                let op =  null, sql = null;\n                if (isQueryField_(comparison)) {\n                    op = '$eq';\n                    comparison = {$eq:propertyValue};\n                }\n                else if (typeof comparison === 'object' && comparison != null) {\n                    //get comparison operator\n                    op = _.keys(comparison)[0];\n                }\n                else {\n                    //set default comparison operator to equal\n                    op = '$eq';\n                    comparison = {$eq:propertyValue};\n                }\n                //escape property name\n                const escapedProperty = this.escapeName(property);\n                switch (op) {\n                    case '$text':\n                        return self.$text({ $name:property}, comparison.$text.$search);\n                    case '$eq':\n                        if (typeof comparison.$eq === 'undefined' || comparison.$eq==null)\n                            return sprintf.sprintf('(%s IS NULL)', escapedProperty);\n                        return sprintf.sprintf('(%s=%s)', escapedProperty, self.escape(comparison.$eq));\n                    case '$gt':\n                        return sprintf.sprintf('(%s>%s)', escapedProperty, self.escape(comparison.$gt));\n                    case '$gte':\n                        return sprintf.sprintf('(%s>=%s)', escapedProperty, self.escape(comparison.$gte));\n                    case '$lt':\n                        return sprintf.sprintf('(%s<%s)', escapedProperty, self.escape(comparison.$lt));\n                    case '$lte':\n                        return sprintf.sprintf('(%s<=%s)', escapedProperty, self.escape(comparison.$lte));\n                    case '$ne':\n                        if (typeof comparison.$ne === 'undefined' || comparison.$ne==null)\n                            return sprintf.sprintf('(NOT %s IS NULL)', escapedProperty);\n                        if (comparison!=null)\n                            return sprintf.sprintf('(NOT %s=%s)', escapedProperty, self.escape(comparison.$ne));\n                        else\n                            return sprintf.sprintf('(NOT %s IS NULL)', escapedProperty);\n                    case '$regex':\n                        return this.$regex({ $name:property} , comparison.$regex);\n                    case '$in':\n                        if (_.isArray(comparison.$in)) {\n                            if (comparison.$in.length==0)\n                                return sprintf.sprintf('(%s IN (NULL))', escapedProperty);\n                            sql = '('.concat(escapedProperty,' IN (',_.map(comparison.$in, function (x) {\n                                return self.escape(x!=null ? x: null)\n                            }).join(', '),'))');\n                            return sql;\n                        }\n                        else if (typeof comparison.$in === 'object') {\n                            //try to validate if comparison.$in is a select query expression (sub-query support)\n                            var sq = _.assign(new QueryExpression(), comparison.$in);\n                            if (sq.$select) {\n                                //if sub query is a select expression\n                                return sprintf.sprintf('(%s IN (%s))', escapedProperty, self.format(sq));\n                            }\n                        }\n                        //otherwise throw error\n                        throw new Error('Invalid query argument. An in statement must contain one or more values.');\n                    case '$nin':\n                        if (_.isArray(comparison.$nin)) {\n                            if (comparison.$nin.length==0)\n                                return sprintf.sprintf('(NOT %s IN (NULL))', escapedProperty);\n                            sql = '(NOT '.concat(escapedProperty,' IN (',_.map(comparison.$nin, function (x) {\n                                return self.escape(x!=null ? x: null)\n                            }).join(', '),'))');\n                            return sql;\n                        }\n                        else if (typeof comparison.$in === 'object') {\n                            //try to validate if comparison.$nin is a select query expression (sub-query support)\n                            var sq = _.assign(new QueryExpression(), comparison.$in);\n                            if (sq.$select) {\n                                //if sub query is a select expression\n                                return sprintf.sprintf('(NOT %s IN (%s))', escapedProperty, self.format(sq));\n                            }\n                        }\n                        //otherwise throw error\n                        throw new Error('Invalid query argument. An in statement must contain one or more values.');\n                    default :\n                        //search if current operator (arithmetic, evaluation etc) exists as a formatter function (e.g. function $add(p1,p2) { ... } )\n                        //in this case the first parameter is the defined property e.g. Price\n                        // and the property value contains an array of all others parameters (if any) and the comparison operator\n                        // e.g. { Price: { $add: [5, { $gt:100} ]} } where we are trying to find elements that meet the following query expression: (Price+5)>100\n                        // The identifier <Price> is the first parameter, the constant 5 is the second\n                        const fn = this[op], p0 = property, p1 = comparison[op];\n                        if (typeof fn === 'function')\n                        {\n                            const args = [];\n                            let argn = null;\n                            //push identifier\n                            args.push({ $name:property });\n                            if (_.isArray(p1)) {\n                                //push other parameters\n                                for (let j = 0; j < p1.length-1; j++) {\n                                    args.push(p1[j]);\n                                }\n                                //get comparison argument (last item of the arguments' array)\n                                argn = p1[p1.length-1];\n                            }\n                            else {\n                                if (self.isComparison(p1)) {\n                                    argn = p1;\n                                }\n                                else {\n                                    //get comparison argument (equal)\n                                    argn = { $eq: p1.valueOf() };\n                                }\n\n                            }\n                            //call formatter function\n                            const f0 = fn.apply(this, args);\n                            return self.formatComparison(argn).replace(/%s/g, f0.replace('$','\\$'));\n                        }\n                        else {\n                            //equal expression\n                            if (typeof p1 !== 'undefined' && p1!=null)\n                                return sprintf.sprintf('(%s=%s)', property, self.escape(p1));\n                            else\n                                return sprintf.sprintf('(%s IS NULL)', property);\n                        }\n\n                }\n        }\n    }\n\n    /**\n     * Implements startsWith(a,b) expression formatter.\n     * @param {*} p0\n     * @param {*} p1\n     * @returns {string}\n     */\n    $startswith(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '';\n        return sprintf.sprintf('(%s REGEXP \\'^%s\\')', this.escape(p0), this.escape(p1, true));\n    }\n\n    /**\n     * Implements endsWith(a,b) expression formatter.\n     * @param {*} p0\n     * @param {*} p1\n     * @returns {string}\n     */\n    $endswith(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '';\n        return sprintf.sprintf('(%s REGEXP \\'%s$$\\')', this.escape(p0), this.escape(p1, true));\n    }\n\n    /**\n     * Implements regular expression formatting.\n     * @param {*} p0\n     * @param {string|*} p1\n     * @returns {string}\n     */\n    $regex(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '';\n        return sprintf.sprintf('(%s REGEXP \\'%s\\')', this.escape(p0), this.escape(p1, true));\n    }\n\n    /**\n     * Implements length(a) expression formatter.\n     * @param {*} p0\n     * @returns {string}\n     */\n    $length(p0) {\n        return sprintf.sprintf('LEN(%s)', this.escape(p0));\n    }\n\n    /**\n     * Implements trim(a) expression formatter.\n     * @param {*} p0\n     * @returns {string}\n     */\n    $trim(p0) {\n        return sprintf.sprintf('TRIM(%s)', this.escape(p0));\n    }\n\n    /**\n     * Implements concat(a,b) expression formatter.\n     * @param {*} p0\n     * @param {*} p1\n     * @returns {string}\n     */\n    $concat(p0, p1) {\n        return sprintf.sprintf('CONCAT(%s,%s)', this.escape(p0),  this.escape(p1));\n    }\n\n    /**\n     * Implements indexOf(str,substr) expression formatter.\n     * @param {string} p0 The source string\n     * @param {string} p1 The string to search for\n     * @returns {string}\n     */\n    $indexof(p0, p1) {\n        return sprintf.sprintf('LOCATE(%s,%s)', this.escape(p1), this.escape(p0));\n    }\n\n    /**\n     * Implements substring(str,pos) expression formatter.\n     * @param {String} p0 The source string\n     * @param {Number} pos The starting position\n     * @param {Number=} length The length of the resulted string\n     * @returns {string}\n     */\n    $substring(p0, pos, length) {\n        if (length)\n            return sprintf.sprintf('SUBSTRING(%s,%s,%s)', this.escape(p0), pos.valueOf()+1, length.valueOf());\n        else\n            return sprintf.sprintf('SUBSTRING(%s,%s)', this.escape(p0), pos.valueOf()+1);\n    }\n\n    /**\n     * Implements lower(str) expression formatter.\n     * @param {String} p0\n     * @returns {string}\n     */\n    $tolower(p0) {\n        return sprintf.sprintf('LOWER(%s)', this.escape(p0));\n    }\n\n    /**\n     * Implements upper(str) expression formatter.\n     * @param {String} p0\n     * @returns {string}\n     */\n    $toupper(p0) {\n        return sprintf.sprintf('UPPER(%s)', this.escape(p0));\n    }\n\n    /**\n     * Implements contains(a,b) expression formatter.\n     * @param {*} p0\n     * @param {*} p1\n     * @returns {string}\n     */\n    $contains(p0, p1) {\n        return this.$text(p0, p1);\n    }\n\n    /**\n     * Implements contains(a,b) expression formatter.\n     * @param {string|*} p0\n     * @param {string|*} p1\n     * @returns {string}\n     */\n    $text(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '';\n        if (p1.valueOf().toString().length==0)\n            return '';\n        return sprintf.sprintf('(%s REGEXP \\'%s\\')', this.escape(p0), this.escape(p1, true));\n    }\n\n    $day(p0) { return sprintf.sprintf('DAY(%s)', this.escape(p0)); }\n    $month(p0) { return sprintf.sprintf('MONTH(%s)', this.escape(p0)); }\n    $year(p0) { return sprintf.sprintf('YEAR(%s)', this.escape(p0)); }\n    $hour(p0) { return sprintf.sprintf('HOUR(%s)', this.escape(p0)); }\n    $minute(p0) { return sprintf.sprintf('MINUTE(%s)', this.escape(p0)); }\n    $second(p0) { return sprintf.sprintf('SECOND(%s)', this.escape(p0)); }\n\n    $date(p0) {\n        return sprintf.sprintf('DATE(%s)', this.escape(p0));\n    }\n\n    $floor(p0) { return sprintf.sprintf('FLOOR(%s)', this.escape(p0)); }\n    $ceiling(p0) { return sprintf.sprintf('CEILING(%s)', this.escape(p0)); }\n\n    /**\n     * Implements round(a) expression formatter.\n     * @param {*} p0\n     * @param {*=} p1\n     * @returns {string}\n     */\n    $round(p0, p1) {\n        if (_.isNil(p1))\n            p1 = 0;\n        return sprintf.sprintf('ROUND(%s,%s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     * Implements a + b expression formatter.\n     * @param {*} p0\n     * @param {*} p1\n     * @returns {string}\n     */\n    $add(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '0';\n        return sprintf.sprintf('(%s + %s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     * Validates whether the given parameter is a field object or not.\n     * @param obj\n     * @returns {boolean}\n     */\n    isField(obj) {\n        if (obj==null || typeof obj==='undefined')\n            return false;\n        if (typeof obj === 'object')\n            if (obj.hasOwnProperty('$name'))\n                return true;\n        return false;\n    }\n\n    /**\n     * Implements a - b expression formatter.\n     * @param {*} p0\n     * @param {*} p1\n     * @returns {string}\n     */\n    $sub(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '0';\n        return sprintf.sprintf('(%s - %s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     * Implements a * b expression formatter.\n     * @param p0 {*}\n     * @param p1 {*}\n     */\n    $mul(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '0';\n        return sprintf.sprintf('(%s * %s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     * Implements a mod b expression formatter.\n     * @param p0 {*}\n     * @param p1 {*}\n     */\n    $mod(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '0';\n        return sprintf.sprintf('(%s % %s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     * Implements [a / b] expression formatter.\n     * @param p0 {*}\n     * @param p1 {*}\n     */\n    $div(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '0';\n        return sprintf.sprintf('(%s / %s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     * Implements [a mod b] expression formatter.\n     * @param p0 {*}\n     * @param p1 {*}\n     */\n    $mod(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '0';\n        return sprintf.sprintf('(%s % %s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     * Implements [a & b] bitwise and expression formatter.\n     * @param p0 {*}\n     * @param p1 {*}\n     */\n    $bit(p0, p1) {\n        //validate params\n        if (_.isNil(p0) || _.isNil(p1))\n            return '0';\n        return sprintf.sprintf('(%s & %s)', this.escape(p0), this.escape(p1));\n    }\n\n    /**\n     *\n     * @param obj {QueryExpression|*}\n     * @returns {string}\n     */\n    formatSelect(obj) {\n        const $this = this;\n        let sql = '';\n        let escapedEntity;\n        if (_.isNil(obj.$select))\n            throw new Error('Select expression cannot be empty at this context.');\n        //get entity name\n        const entity = _.findKey(obj.$select);\n        let joins = [];\n        if (obj.$expand!=null)\n        {\n            if (_.isArray(obj.$expand))\n                joins=obj.$expand;\n            else\n                joins.push(obj.$expand);\n        }\n        //get entity fields\n        const fields = obj.fields();\n        //if fields is not an array\n        if (!_.isArray(fields))\n            throw new Error('Select expression does not contain any fields or the collection of fields is of the wrong type.');\n\n        //validate entity reference (if any)\n        if (obj.$ref && obj.$ref[entity]) {\n            const entityRef = obj.$ref[entity];\n            //escape entity ref\n            escapedEntity = entityRef.$as ?  $this.escapeName(entityRef.name) + ' AS ' + $this.escapeName(entityRef.$as) : $this.escapeName(entityRef.name);\n        }\n        else {\n            //escape entity name\n            escapedEntity = $this.escapeName(entity)\n        }\n        //add basic SELECT statement\n        if (obj.$fixed) {\n            sql = sql.concat('SELECT * FROM (SELECT ', _.map(fields, function(x) {\n                return $this.format(x,'%f');\n            }).join(', '), ') ', escapedEntity);\n        }\n        else {\n            sql = sql.concat(obj.$distinct ? 'SELECT DISTINCT ' : 'SELECT ', _.map(fields, function(x) {\n                return $this.format(x,'%f');\n            }).join(', '), ' FROM ', escapedEntity);\n        }\n\n\n        //add join if any\n        if (obj.$expand!=null)\n        {\n            //enumerate joins\n            _.forEach(joins, function(x) {\n                if (x.$entity instanceof QueryExpression) {\n                    //get on statement (the join comparison)\n                    sql = sql.concat(sprintf.sprintf(' INNER JOIN (%s)', $this.format(x.$entity)));\n                    //add alias\n                    if (x.$entity.$alias)\n                        sql = sql.concat(' AS ').concat($this.escapeName(x.$entity.$alias));\n                }\n                else {\n                    //get join table name\n                    var table = _.findKey(x.$entity);\n                    //get on statement (the join comparison)\n                    const joinType = (x.$entity.$join || 'inner').toUpperCase();\n                    sql = sql.concat(' '+ joinType + ' JOIN ').concat($this.escapeName(table));\n                    //add alias\n                    if (x.$entity.$as)\n                        sql = sql.concat(' AS ').concat($this.escapeName(x.$entity.$as));\n                }\n                if (_.isArray(x.$with))\n                {\n                    if (x.$with.length!=2)\n                        throw new Error('Invalid join comparison expression.');\n\n                    //get left and right expression\n                    const left = x.$with[0];\n\n                    const right = x.$with[1];\n\n                    let //the default left table is the query entity\n                    leftTable =  entity;\n\n                    let //the default right table is the join entity\n                    rightTable = table;\n\n                    if (typeof left === 'object') {\n                        leftTable = _.findKey(left);\n                    }\n                    if (typeof right === 'object') {\n                        rightTable = _.findKey(right);\n                    }\n                    const leftFields = left[leftTable], rightFields = right[rightTable];\n                    for (let i = 0; i < leftFields.length; i++)\n                    {\n                        let leftExpr = null, rightExpr = null;\n                        if (typeof leftFields[i] == 'object')\n                            leftExpr = leftFields[i];\n                        else {\n                            leftExpr = {};\n                            leftExpr[leftTable] = leftFields[i];\n                        }\n                        if (typeof rightFields[i] == 'object')\n                            rightExpr = rightFields[i];\n                        else {\n                            rightExpr = {};\n                            rightExpr[rightTable] = rightFields[i];\n                        }\n                        sql = sql.concat((i==0) ? ' ON ' : ' AND ', $this.formatField(leftExpr), '=',  $this.formatField(rightExpr));\n                    }\n                }\n                else {\n                    sql = sql.concat(' ON ', $this.formatWhere(x.$with));\n                }\n            });\n        }\n        //add WHERE statement if any\n        if (_.isObject(obj.$where))\n        {\n            if (_.isObject(obj.$prepared)) {\n                const where1 = { $and: [obj.$where, obj.$prepared] };\n                sql = sql.concat(' WHERE ',this.formatWhere(where1));\n            }\n            else {\n                sql = sql.concat(' WHERE ',this.formatWhere(obj.$where));\n            }\n\n        }\n        else {\n            if (_.isObject(obj.$prepared))\n                sql = sql.concat(' WHERE ',this.formatWhere(obj.$prepared));\n        }\n\n        if (_.isObject(obj.$group))\n            sql = sql.concat(this.formatGroupBy(obj.$group));\n\n        if (_.isObject(obj.$order))\n            sql = sql.concat(this.formatOrder(obj.$order));\n\n        //finally return statement\n        return sql;\n    }\n\n    /**\n     *\n     * @param {QueryExpression} obj\n     * @returns {string}\n     */\n    formatLimitSelect(obj) {\n\n        let sql=this.formatSelect(obj);\n        if (obj.$take) {\n            if (obj.$skip)\n            //add limit and skip records\n                sql= sql.concat(' LIMIT ', obj.$skip.toString() ,', ',obj.$take.toString());\n            else\n            //add only limit\n                sql= sql.concat(' LIMIT ',  obj.$take.toString());\n        }\n        return sql;\n    }\n\n    formatField(obj) {\n        const self = this;\n        if (obj==null)\n            return '';\n        if (typeof obj === 'string')\n            return obj;\n        if (_.isArray(obj)) {\n            return _.map(obj, function(x) {\n                return x.valueOf();\n            }).join(', ');\n        }\n        if (typeof obj === 'object') {\n            //if field is a constant e.g. { $value:1000 }\n            if (obj.hasOwnProperty('$value'))\n                return this.escapeConstant(obj['$value']);\n            //get table name\n            const tableName = _.findKey(obj);\n            let fields = [];\n            if (!_.isArray(obj[tableName])) {\n                fields.push(obj[tableName])\n            }\n            else {\n                fields = obj[tableName];\n            }\n            return _.map(fields, function(x) {\n                if (QueryField.fieldNameExpression.test(x.valueOf()))\n                    return self.escapeName(tableName.concat('.').concat(x.valueOf()));\n                else\n                    return self.escapeName(x.valueOf());\n            }).join(', ');\n        }\n    }\n\n    /**\n     * Formats a order object to the equivalent SQL statement\n     * @param obj\n     * @returns {string}\n     */\n    formatOrder(obj) {\n        const self = this;\n        if (!_.isArray(obj))\n            return '';\n        const sql = _.map(obj, function(x)\n        {\n            const f = x.$desc ? x.$desc : x.$asc;\n            if (typeof f === 'undefined' || f==null)\n                throw new Error('An order by object must have either ascending or descending property.');\n            if (_.isArray(f)) {\n                return _.map(f, function(a) {\n                    return self.format(a,'%ff').concat(x.$desc ? ' DESC': ' ASC');\n                }).join(', ');\n            }\n            return self.format(f,'%ff').concat(x.$desc ? ' DESC': ' ASC');\n        }).join(', ');\n        if (sql.length>0)\n            return ' ORDER BY '.concat(sql);\n        return sql;\n    }\n\n    /**\n     * Formats a group by object to the equivalent SQL statement\n     * @param obj {Array}\n     * @returns {string}\n     */\n    formatGroupBy(obj) {\n        const self = this;\n        if (!_.isArray(obj))\n            return '';\n        const arr = [];\n        _.forEach(obj, function(x) {\n            arr.push(self.format(x, '%ff'));\n        });\n        const sql = arr.join(', ');\n        if (sql.length>0)\n            return ' GROUP BY '.concat(sql);\n        return sql;\n    }\n\n    /**\n     * Formats an insert query to the equivalent SQL statement\n     * @param obj {QueryExpression|*}\n     * @returns {string}\n     */\n    formatInsert(obj) {\n        const self= this;\n        let sql = '';\n        if (_.isNil(obj.$insert))\n            throw new Error('Insert expression cannot be empty at this context.');\n        //get entity name\n        const entity = _.findKey(obj.$insert);\n        //get entity fields\n        const obj1 = obj.$insert[entity];\n        const props = [];\n        for(const prop in obj1)\n            if (obj1.hasOwnProperty(prop))\n                props.push(prop);\n        sql = sql.concat('INSERT INTO ', self.escapeName(entity), '(' , _.map(props, function(x) { return self.escapeName(x); }).join(', '), ') VALUES (',\n            _.map(props, function(x)\n            {\n                const value = obj1[x];\n                return self.escape(value!=null ? value: null);\n            }).join(', ') ,')');\n        return sql;\n    }\n\n    /**\n     * Formats an update query to the equivalent SQL statement\n     * @param obj {QueryExpression|*}\n     * @returns {string}\n     */\n    formatUpdate(obj) {\n        const self= this;\n        let sql = '';\n        if (!_.isObject(obj.$update))\n            throw new Error('Update expression cannot be empty at this context.');\n        //get entity name\n        const entity = _.findKey(obj.$update);\n        //get entity fields\n        const obj1 = obj.$update[entity];\n        const props = [];\n        for(const prop in obj1)\n            if (obj1.hasOwnProperty(prop))\n                props.push(prop);\n        //add basic INSERT statement\n        sql = sql.concat('UPDATE ', self.escapeName(entity), ' SET ',\n            _.map(props, function(x)\n            {\n                const value = obj1[x];\n                return self.escapeName(x).concat('=', self.escape(value!=null ? value: null));\n            }).join(', '));\n        if (_.isObject(obj.$where))\n            sql = sql.concat(' WHERE ',this.formatWhere(obj.$where));\n        return sql;\n    }\n\n    /**\n     * Formats a delete query to the equivalent SQL statement\n     * @param obj {QueryExpression|*}\n     * @returns {string}\n     */\n    formatDelete(obj) {\n        let sql = '';\n        if (obj.$delete==null)\n            throw new Error('Delete expression cannot be empty at this context.');\n        //get entity name\n        const entity = obj.$delete;\n        //add basic INSERT statement\n        sql = sql.concat('DELETE FROM ', this.escapeName(entity));\n        if (_.isObject(obj.$where))\n            sql = sql.concat(' WHERE ',this.formatWhere(obj.$where));\n        return sql;\n    }\n\n    escapeName(name) {\n        if (typeof name === 'string')\n            return name.replace(/(\\w+)$|^(\\w+)$/g, this.settings.nameFormat);\n        return name;\n    }\n\n    /**\n     * @param obj {QueryField}\n     * @param format {string}\n     * @returns {string|*}\n     */\n    formatFieldEx(obj, format) {\n\n        if ((typeof obj === 'undefined') || (obj==null))\n            return null;\n        if (!isQueryField_(obj))\n            throw new Error('Invalid argument. An instance of QueryField class is expected.');\n        //get property\n        let prop = _.findKey(obj);\n        if (prop==null)\n            return null;\n        const useAlias = (format=='%f');\n        if (prop==='$name') {\n            return (this.settings.forceAlias && useAlias) ? this.escapeName(obj.$name).concat(' AS ', this.escapeName(obj.name())) : this.escapeName(obj.$name);\n        }\n        else {\n            const expr = obj[prop];\n            if (expr==null)\n                throw new Error('Field definition cannot be empty while formatting.');\n            if (typeof expr === 'string') {\n                return useAlias ? this.escapeName(expr).concat(' AS ', this.escapeName(prop)) : expr;\n            }\n            //get aggregate expression\n            const alias = prop;\n            prop = _.findKey(expr);\n            const name = expr[prop];\n            let s;\n            switch (prop) {\n                case '$count':\n                    s= sprintf.sprintf('COUNT(%s)',this.escapeName(name));\n                    break;\n                case '$min':\n                    s= sprintf.sprintf('MIN(%s)',this.escapeName(name));\n                    break;\n                case '$max':\n                    s= sprintf.sprintf('MAX(%s)',this.escapeName(name));\n                    break;\n                case '$avg':\n                    s= sprintf.sprintf('AVG(%s)',this.escapeName(name));\n                    break;\n                case '$sum':\n                    s= sprintf.sprintf('SUM(%s)',this.escapeName(name));\n                    break;\n                case '$value':\n                    s= this.escapeConstant(name);\n                    break;\n                default :\n                    const fn = this[prop];\n                    if (typeof fn === 'function') {\n                        /**\n                         * get method arguments\n                         * @type {Array}\n                         */\n                        const args = expr[prop];\n                        s = fn.apply(this,args);\n                    }\n                    else\n                        throw new Error('The specified function is not yet implemented.');\n            }\n            return useAlias ? s.concat(' AS ', this.escapeName(alias)) : s;\n        }\n    }\n\n    /**\n     * Formats a query expression and returns the SQL equivalent string\n     * @param obj {QueryExpression|*}\n     * @param s {string=}\n     * @returns {string|*}\n     */\n    format(obj, s) {\n        if (obj==null)\n            return null;\n        //if a format is defined\n        if (s!==undefined)\n        {\n            if ((s =='%f') || (s =='%ff'))\n            {\n                //field formatting\n                let field = new QueryField();\n                if (typeof obj === 'string')\n                    field.select(obj);\n                else\n                    field = _.assign(new QueryField(), obj);\n                return this.formatFieldEx(field, s);\n            }\n            else if (s=='%o') {\n                if (obj instanceof QueryExpression)\n                    return this.formatOrder(obj.$order);\n                return this.formatOrder(obj);\n            }\n        }\n\n        /**\n         * @type {QueryExpression}\n         */\n        let query = null;\n        //cast object to QueryExpression\n        if (obj instanceof QueryExpression)\n            query = obj;\n        else\n            query = _.assign(new QueryExpression(), obj);\n        //format query\n        if (_.isObject(query.$select)) {\n            if (!query.hasPaging())\n                return this.formatSelect(query);\n            else\n                return this.formatLimitSelect(query);\n        }\n        else if (_.isObject(query.$insert))\n            return this.formatInsert(query);\n        else if (_.isObject(query.$update))\n            return this.formatUpdate(query);\n        else if (query.$delete!=null)\n            return this.formatDelete(query);\n        else if (query.$where!=null)\n            return this.formatWhere(query.$where);\n        else\n            return null;\n\n    }\n}\n\nSqlFormatter.prototype.$indexOf = SqlFormatter.prototype.$indexof;\n\nSqlFormatter.prototype.$substr = SqlFormatter.prototype.$substring;\n\nSqlFormatter.prototype.$toLower = SqlFormatter.prototype.$tolower;\nSqlFormatter.prototype.$toUpper = SqlFormatter.prototype.$toupper;\nSqlFormatter.prototype.$dayOfMonth = SqlFormatter.prototype.$day;\nSqlFormatter.prototype.$minutes = SqlFormatter.prototype.$minute;\nSqlFormatter.prototype.$seconds = SqlFormatter.prototype.$second;\n\nSqlFormatter.prototype.$subtract = SqlFormatter.prototype.$sub;\n\nSqlFormatter.prototype.$multiply = SqlFormatter.prototype.$mul;\n\nSqlFormatter.prototype.$divide = SqlFormatter.prototype.$div;\n\nfunction isQueryField_(obj) {\n    if ((typeof obj === 'undefined') || (obj==null))\n        return false;\n    return (obj.constructor) && (obj.constructor.name === 'QueryField');\n}"]}